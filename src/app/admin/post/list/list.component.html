<ngx-page-header title="Posts" subtitle="List of posts"></ngx-page-header>

<div class="row">
	<div class="col-12">
		<nb-card>
			<nb-card-body class="px-0 table-responsive">
				<div class="col-5 filters">
					<div class="row">
						<ngx-list-filter class="col-6 px-1" type="primary" title="Language"
						                 [options]="languages" (onChange)="filter('lang', $event)">
							<i class="ion-ios-chatboxes-outline"></i>
						</ngx-list-filter>
						<ngx-list-filter class="col-5 px-1" type="primary" title="Status"
						                 [options]="statuses" (onChange)="filter('status', $event)">
							<i class="ion-ios-bookmarks-outline"></i>
						</ngx-list-filter>
					</div>
				</div>

				<div class="mb-2">
					<div class="col-12 pr-0">
						<ngx-pagination [pagination]="pagination"></ngx-pagination>
					</div>
				</div>

				<table class="table table-striped">
					<thead>
					<tr>
						<th scope="col" width="10%" class="action-create">
							<a routerLink="/admin/post/create" class="btn btn-hero-primary btn-block btn-tn">
								Create
							</a>
						</th>
						<th scope="col" width="10%">ID</th>
						<th scope="col" width="25%">Name</th>
						<th scope="col" width="20%">Languages</th>
						<th scope="col" width="15%">Status</th>
						<th scope="col" width="20%">Last update</th>
					</tr>
					</thead>
					<tbody>
					<tr *ngFor="let post of posts">
						<td class="p-0 pt-1">
							<nb-actions size="medium">
								<nb-action>
									<a routerLink="/admin/post/update/{{ post.id }}">
										<i class="control-icon nb-edit"></i>
									</a>
								</nb-action>
								<nb-action icon="nb-trash" (click)="deleteOne(post.id)"></nb-action>
							</nb-actions>
						</td>
						<td>{{ post.id }}</td>
						<td>{{ post.translations[ 0 ]?.title }}</td>
						<td>{{ post.translations | column:"language" }}</td>
						<td>{{ post.post_status_id | atIndexOf:statuses:"id":"name" | ngxCapitalize }}</td>
						<td>{{ post.updated_on || "never" }}</td>
					</tr>
					</tbody>
				</table>
			</nb-card-body>
		</nb-card>
	</div>
</div>